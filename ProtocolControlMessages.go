package main

import (
	"log"
	"net"

	"github.com/pennfly/amf-go"
)

//CommandAMF0 20
func CommandAMF0(m []byte, conn net.Conn) {
	commandName := amf.Decode(m)
	switch commandName[0] {
	case "connect":
		bs := []byte{2, 0, 0, 0, 0, 0, 4, 1, 0, 0, 0, 0, 0, 0, 4, 0 /**/, 2, 0, 0, 0, 0, 0, 4, 5, 0, 0, 0, 0, 0, 38, 37, 160 /**/, 3, 0, 0, 0, 0, 1, 5, 20, 0, 0, 0, 0, 2, 0, 7, 95, 114, 101, 115, 117, 108, 116, 0, 63, 240, 0, 0, 0, 0, 0, 0, 3, 0, 6, 102, 109, 115, 86, 101, 114, 2, 0, 14, 70, 77, 83, 47, 51, 44, 53, 44, 53, 44, 50, 48, 48, 52, 0, 12, 99, 97, 112, 97, 98, 105, 108, 105, 116, 105, 101, 115, 0, 64, 63, 0, 0, 0, 0, 0, 0, 0, 4, 109, 111, 100, 101, 0, 63, 240, 0, 0, 0, 0, 0, 0, 0, 0, 9, 3, 0, 5, 108, 101, 118, 101, 108, 2, 0, 6, 115, 116, 97, 116, 117, 115, 0, 4, 99, 111, 100, 101, 2, 0, 29, 78, 101, 116, 67, 111, 110, 110, 101, 99, 116, 105, 111, 110, 46, 67, 111, 110, 110, 101, 99, 116, 46, 83, 117, 99, 99, 101, 115, 115, 0, 11, 100, 101, 115, 99, 114, 105, 112, 116, 105, 111, 110, 2, 0, 21, 67, 111, 110, 110, 101, 99, 116, 105, 111, 110, 32, 115, 117, 99, 99, 101, 101, 100, 101, 100, 46, 0, 4, 100, 97, 116, 97, 8, 0, 0, 0, 1, 0, 7, 118, 101, 114, 115, 105, 111, 110, 2, 0, 10, 51, 44, 53, 44, 53, 44, 50, 48, 48, 52, 0, 0, 9, 0, 8, 99, 108, 105, 101, 110, 116, 73, 100, 0, 65, 215, 155, 120, 124, 192, 0, 0, 0, 14, 111, 98, 106, 101, 99, 116, 69, 110, 99, 111, 100, 105, 110, 103, 0, 64, 8, 0, 0, 0, 0, 0, 0, 0, 0, 9}
		conn.Write(bs)
	case "createStream":
		bs := []byte{3, 0, 0, 0, 0, 0, 29, 20, 0, 0, 0, 0, 2, 0, 7, 95, 114, 101, 115, 117, 108, 116, 0, 64, 16, 0, 0, 0, 0, 0, 0, 5, 0, 63, 240, 0, 0, 0, 0, 0, 0}
		conn.Write(bs)
	case "publish":
		bs := []byte{4, 0, 0, 0, 0, 0, 105, 20, 1, 0, 0, 0, 2, 0, 8, 111, 110, 83, 116, 97, 116, 117, 115, 0, 0, 0, 0, 0, 0, 0, 0, 0, 5, 3, 0, 5, 108, 101, 118, 101, 108, 2, 0, 6, 115, 116, 97, 116, 117, 115, 0, 4, 99, 111, 100, 101, 2, 0, 23, 78, 101, 116, 83, 116, 114, 101, 97, 109, 46, 80, 117, 98, 108, 105, 115, 104, 46, 83, 116, 97, 114, 116, 0, 11, 100, 101, 115, 99, 114, 105, 112, 116, 105, 111, 110, 2, 0, 16, 83, 116, 97, 114, 116, 32, 112, 117, 98, 108, 105, 115, 105, 110, 103, 46, 0, 0, 9}
		conn.Write(bs)
	default:

	}
	log.Println(commandName, len(m))
}
